<!DOCTYPE html>
<html layout:decorate="~{layouts/pages.html}">
<head>
</head>
<body>
    <span layout:fragment="content">
		<p>
		    <h5>Import et analyse de lot(s) en cours pour le projet <span th:class="|project-theme-txt-${project.color}|" th:text="${project.name}">project</span></h5>
		</p>
		<div class="alert alert-secondary" role="alert">
			<strong>Chargement en cours, merci de patienter</strong>. 
			<span th:if="${result}">
				Le fichier d'import en cours de traitement comporte <span th:text="${result.counts['commits-all'].modified}">10</span> lots,
				dont <span th:text="${result.counts['commits-all'].added}">10</span> seront appliqués dans la base de données de paramétrage.
			</span>
			Le traitement d'analyse des différences entre la base de données gérée et l'index obtenu suite à l'import peut prendre un certain 
			temps. Il n'est pas possible d'arrêter un traitement en cours.<br/><br/>
			<div class="progress">
				<div id="progressBar" class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:00%">00%</div>
			</div>
		</div>
		<p>&nbsp;<br/><br/><br/><br/></p>
	</span>
    <script layout:fragment="script" th:inline="javascript">

    	// Start loading
    	$(document).ready(() => {
    		checkProgress('/ui/merge/progress', '/ui/merge');
		}); 
		
    </script>
</body>
</html>